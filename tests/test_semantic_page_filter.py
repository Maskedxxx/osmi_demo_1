"""
–¢–µ—Å—Ç —Å–µ—Ä–≤–∏—Å–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
"""

import asyncio
import os
import sys

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from services.semantic_page_filter import analyze_document_from_json


async def test_semantic_page_filter():
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü"""
    
    print("üîç –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä–∞–Ω–∏—Ü")
    print("=" * 50)
    
    # –ü—É—Ç—å –∫ —Ç–µ—Å—Ç–æ–≤–æ–º—É JSON —Ñ–∞–π–ª—É
    json_path = "tests/data/ocr_result.json"
    
    # TODO: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ utterances –ø—Ä–∏–º–µ—Ä–∞–º–∏ —Ç–µ–∫—Å—Ç–æ–≤ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –≤ —Ä–µ–º–æ–Ω—Ç–µ
    utterances = [
        "–ö–∞–∫–∏–µ —Ä–∏—Å–∫–∏ –∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –ø–æ–ª–∞ –æ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ (6‚Äì9 –º–º/–º), –ø—Ä–µ–≤—ã—à–∞—é—â–µ–º –Ω–æ—Ä–º–∞—Ç–∏–≤ 0,2%?",
        "–ö–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–æ—è–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –∑–≤—É—á–∞–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ—Å—Ç—É–∫–∏–≤–∞–Ω–∏–∏ –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–ª–∏—Ç–æ–∫ (–ø—É—Å—Ç–æ—Ç—ã/–æ—Ç—Å–ª–∞–∏–≤–∞–Ω–∏–µ) –∏ –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –¥–µ—Ñ–µ–∫—Ç–∞ –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã?",
        "–ö–∞–∫–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–º–æ–Ω—Ç–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —É—Å—Ç—É–ø–æ–≤ –º–µ–∂–¥—É —Å–º–µ–∂–Ω—ã–º–∏ –ø–ª–∏—Ç–æ—á–Ω—ã–º–∏ –ø–æ–∫—Ä—ã—Ç–∏—è–º–∏ 3‚Äì6 –º–º, –ø—Ä–µ–≤—ã—à–∞—é—â–∏—Ö –¥–æ–ø—É—Å—Ç–∏–º—ã–π 1 –º–º?",
        "–ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –∏ –¥–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –∏ –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ—Ç–ª–∏—á–∏–π –ø–æ —Ü–≤–µ—Ç—É, –ø–æ–ª–æ—Å, –ø—è—Ç–µ–Ω, –ø–æ–¥—Ç–µ–∫–∞ÃÅ—Ö, —Å–ª–µ–¥–æ–≤ –æ—Ç –∫–∏—Å—Ç–∏ –∏–ª–∏ –≤–∞–ª–∏–∫–∞, –º–µ–ª–µ–Ω–∏–∏ –∏ –æ—Ç—Å–ª–æ–µ–Ω–∏–∏ –ø–æ–∫—Ä–∞—Å–æ—á–Ω–æ–≥–æ —Å–ª–æ—è?",
        "–ö–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏ —Å–ø–æ—Å–æ–±—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –æ—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π —Å—Ç–µ–Ω –±–æ–ª–µ–µ 3 –º–º –Ω–∞ –º–µ—Ç—Ä (6 –º–º –Ω–∞ 2 –º), –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–¥–µ–ª–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—Ö?",
        "–ö–∞–∫–∏–µ –¥–µ—Ñ–µ–∫—Ç—ã –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–º–æ–Ω—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã –ø—Ä–∏ —Å–∫–æ–ª–∞—Ö –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–æ–π –ø–ª–∏—Ç–∫–∏ –∏ –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –æ–±–ª–∏—Ü–æ–≤–∞–Ω–Ω–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –±–æ–ª–µ–µ 1,5 –º–º –Ω–∞ –º–µ—Ç—Ä (3 –º–º –Ω–∞ 2 –º)?",
        "–ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∏–∑‚Äë–∑–∞ —É–≥–ª–æ–≤—ã—Ö –ø–µ—Ä–µ–≥–∏–±–æ–≤ –∏ —Ä–∞—Å—Ç—è–∂–µ–Ω–∏–π —É–ø–ª–æ—Ç–Ω—è—é—â–∏—Ö –ø—Ä–æ–∫–ª–∞–¥–æ–∫, –Ω–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏—Ö –ø–ª–æ—Ç–Ω—ã–π –æ–±–∂–∏–º?",
        "–ö–∞–∫–∏–µ —Ä–∏—Å–∫–∏ –∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ì–û–°–¢ 21519-2003 –ø–æ —á–∏—Å–ª—É –∫–æ–Ω—Ç—É—Ä–æ–≤ —É–ø–ª–æ—Ç–Ω—è—é—â–∏—Ö –ø—Ä–æ–∫–ª–∞–¥–æ–∫ –∏ –∏—Ö –ø—Ä–∏–ª–µ–≥–∞–Ω–∏—é –≤ –ø—Ä–∏—Ç–≤–æ—Ä–∞—Ö?",
        "–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ —á–∞—Å—Ç–∏—á–Ω—É—é –∑–∞–º–µ–Ω—É 8 –º —É–ø–ª–æ—Ç–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑–∏–Ω–æ–∫ –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ ¬´1¬ª, –∏–ª–∏ –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –¥–µ—Ñ–µ–∫—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–º–æ–Ω—Ç–∞–∂ –∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–∫–æ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤?",
        "–ö–∞–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ–±–ª–∏—Ü–æ–≤–∫–∏ –¥–æ 6 –º–º/–º –∏ –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–µ —à–≤—ã –ø–ª–∏—Ç–∫–∏ –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ ¬´–í¬ª —Å —É—á—ë—Ç–æ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –°–ü 71.13330.2017?",
        "–ö–∞–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –≤—ã—è–≤–ª—è—é—Ç—Å—è –∏ —É—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –æ—Ç—Å–ª–æ–µ–Ω–∏—è –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–æ–π –ø–ª–∏—Ç–∫–∏ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–≤—É—á–∞–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ—Å—Ç—É–∫–∏–≤–∞–Ω–∏–∏) –∏ –∫–∞–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –¢–† 94.06-99 –ø—Ä–∏–º–µ–Ω–∏–º—ã –ø—Ä–∏ —Ä–µ–º–æ–Ω—Ç–µ?",
        "–ö–∞–∫–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç –∏ –æ–±—ä—ë–º—ã (–≥—Ä—É–Ω—Ç–æ–≤–∫–∞, –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, —à–ø–∞–∫–ª—ë–≤–∫–∞, –ø–æ–∫—Ä–∞—Å–∫–∞, –∑–∞–º–µ–Ω–∞ –∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω–∏—Ç–∞ 17,80 –º¬≤) –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –¥–µ—Ñ–µ–∫—Ç–æ–≤ –∏ –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∏—Ö —Å–ª–µ–¥—É–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å?",
        "–ö–∞–∫–∏–µ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–∏—Å–∫–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –ø–æ–ª–∞ –æ—Ç –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –±–æ–ª–µ–µ 2 –º–º (–≤–ø–ª–æ—Ç—å –¥–æ 5 –º–º) –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ `1`?",
        "–ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –∏ –æ–±—ä—ë–º—ã —Ä–∞–±–æ—Ç —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –¥–µ—Ñ–µ–∫—Ç–æ–≤ –ø–æ–ª–∞, –∏ –∫—Ç–æ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥–µ—Ñ–µ–∫—Ç–æ–≤, –æ–±—Ä–∞–∑–æ–≤–∞–≤—à–∏—Ö—Å—è –≤ —Ö–æ–¥–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ-–º–æ–Ω—Ç–∞–∂–Ω—ã—Ö –∏ –æ—Ç–¥–µ–ª–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç?",
        "–ö–∞–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –Ω–æ—Ä–º (–°–ü 71.13330.2017 / –°–ù–∏–ü 3.04.01-87) –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —É—Å—Ç—É–ø–æ–≤ –º–µ–∂–¥—É —Å–º–µ–∂–Ω—ã–º–∏ –∏–∑–¥–µ–ª–∏—è–º–∏ –Ω–∞–ø–æ–ª—å–Ω—ã—Ö –ø–æ–∫—Ä—ã—Ç–∏–π –∏–∑ –¥–æ—â–∞—Ç—ã—Ö, –ø–∞—Ä–∫–µ—Ç–Ω—ã—Ö, –ª–∏–Ω–æ–ª–µ—É–º–Ω—ã—Ö –∏–ª–∏ –ü–í–•-–ø–ª–∏—Ç?",
        "–ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏ —Å–ø–æ—Å–æ–±—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –æ—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –¥–≤–µ—Ä–Ω–æ–π –∫–æ—Ä–æ–±–∫–∏ –º–µ–∂–∫–æ–º–Ω–∞—Ç–Ω—ã—Ö –¥–≤–µ—Ä–µ–π –±–æ–ª–µ–µ 1,5 –º–º/–º –∏ –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é?",
        "–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∑–∞–º–µ–Ω–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –≤–∏–¥–∏–º—ã—Ö –¥–µ—Ñ–µ–∫—Ç–∞—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –≤—Ö–æ–¥–Ω–æ–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–π –¥–≤–µ—Ä–∏ (—Ä–∞–∑–ª–∏—á–∏–µ —Ü–≤–µ—Ç–∞ –∏ –≥–ª—è–Ω—Ü–∞), –ø—Ä–∏–∑–Ω–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏ –Ω–µ—É—Å—Ç—Ä–∞–Ω–∏–º—ã–º–∏?",
        "–ö–∞–∫–∏–µ —Ä–µ–º–æ–Ω—Ç–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–∏ –ø—Ä–æ–≤–∏—Å–∞–Ω–∏–∏ –ø–æ–ª–æ—Ç–Ω–∞ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏ 4 –º–º/–º –∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –æ—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ 5 –º–º/–º, –∏ –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–≤—É—é –¥–≤–µ—Ä—å?",
        "–ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è –≥–µ—Ä–º–µ—Ç–∏—á–Ω–æ—Å—Ç–∏, —Ç–µ–ø–ª–æ- –∏ –∑–≤—É–∫–æ–∏–∑–æ–ª—è—Ü–∏–∏ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –∑–∞–∑–æ—Ä—ã –≤ —É–≥–ª–æ–≤—ã—Ö –∏ –¢-–æ–±—Ä–∞–∑–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö –æ–∫–æ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ —Ä–∞–∑–º–µ—Ä–æ–º 0,75‚Äì1,0 –º–º –∏ –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ì–û–°–¢?",
        "–ö–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥–µ—Ñ–µ–∫—Ç–∞, –æ–±—Ä–∞–∑–æ–≤–∞–≤—à–µ–≥–æ—Å—è –ø—Ä–∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–∏ –∏ –ø—Ä–∏–∑–Ω–∞–Ω–Ω–æ–≥–æ ¬´–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º, –Ω–µ—É—Å—Ç—Ä–∞–Ω–∏–º—ã–º¬ª (–∑–∞–∑–æ—Ä—ã >0,5 –º–º): –∑–∞–º–µ–Ω–∞ –∏–∑–¥–µ–ª–∏—è, —Ä–µ–∫–ª–∞–º–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è –∏–ª–∏ –¥—Ä—É–≥–∏–µ –º–µ—Ä—ã?",
        "–ö–∞–∫–∏–µ –ø—Ä–∏—á–∏–Ω—ã –∑–∞–µ–¥–∞–Ω–∏—è —Å—Ç–≤–æ—Ä–∫–∏ –∏ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∑–∞–ø–∏—Ä–∞—é—â–∏—Ö –ø—Ä–∏–±–æ—Ä–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∞–∂–µ, –∏ –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ä–∞–Ω–∏—è?",
        "–ö–∞–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –æ—Ç–ª–∏—á–∏—è–º –ø–æ —Ü–≤–µ—Ç—É –∏ –ø–æ—è–≤–ª–µ–Ω–∏—é –ø–æ–ª–æ—Å, —Å–ª–µ–¥–æ–≤ –æ—Ç –∫–∏—Å—Ç–∏ –∏–ª–∏ –≤–∞–ª–∏–∫–∞ –Ω–∞ –ø–æ–∫—Ä–∞—Å–æ—á–Ω–æ–º –ø–æ–∫—Ä—ã—Ç–∏–∏ –ø–æ—Ç–æ–ª–∫–∞?",
        "–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—è—Ç–µ–Ω, –ø–æ–¥—Ç–µ–∫–æ–≤, –±—Ä—ã–∑–≥ –∏ –º–µ–ª–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏, –∏ –∫–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –ø–æ—Ç–æ–ª–æ—á–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è?",
        "–ö–∞–∫–∏–µ —Ä–µ–º–æ–Ω—Ç–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (–≤–∫–ª—é—á–∞—è –≥—Ä—É–Ω—Ç–æ–≤–∫—É –≤ 2 —Å–ª–æ—è –∏ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ–∫—Ä–∞—Å–∫—É) –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –ø—Ä–∏ –æ—Ç—Å–ª–æ–µ–Ω–∏–∏ –ø–æ–∫—Ä—ã—Ç–∏—è, –Ω–µ—Ä–æ–≤–Ω–æ—Å—Ç—è—Ö, —Ç—Ä–µ—â–∏–Ω–∞—Ö –∏ —Ä–∞–∫–æ–≤–∏–Ω–∞—Ö –Ω–∞ –ø–æ—Ç–æ–ª–∫–µ?",
        "–ö–∞–∫–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –±—ã–ª–∏ –≤—ã—è–≤–ª–µ–Ω—ã –ø—Ä–∏ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ‚Äë–º–æ–Ω—Ç–∞–∂–Ω—ã—Ö –∏ –æ—Ç–¥–µ–ª–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç –≤ –∫–≤–∞—Ä—Ç–∏—Ä–µ?",
        "–ö–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –¥–µ—Ñ–µ–∫—Ç—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã —Ç—Ä–µ–±—É—é—Ç —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏ –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã —Ä–µ–º–æ–Ω—Ç–∞ –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç—Å—è –¥–ª—è –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è?",
        "–ö–∞–∫–æ–≤–∞ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –¥–µ—Ñ–µ–∫—Ç–æ–≤ –∏ –∫–∞–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è—é—Ç –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å —ç—Ç–æ–π –æ—Ü–µ–Ω–∫–∏?",
    ]
    
    try:
        print(f"üìÑ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –¥–æ–∫—É–º–µ–Ω—Ç: {json_path}")
        print(f"üéØ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ utterances –¥–ª—è –æ–±—É—á–µ–Ω–∏—è: {len(utterances)}")
        print("üîß –ü–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏: 0.5")
        print("üìä –ú–∞–∫—Å–∏–º—É–º —Å—Ç—Ä–∞–Ω–∏—Ü: 10")
        print()
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞
        relevant_pages = await analyze_document_from_json(
            json_path=json_path,
            utterances=utterances,
            score_threshold=0.5,
            top_limit=10
        )
        
        print("üìã –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ê–ù–ê–õ–ò–ó–ê:")
        print("-" * 30)
        print(f"‚úÖ –ù–∞–π–¥–µ–Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü: {len(relevant_pages)}")
        print(f"üìÑ –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü: {relevant_pages}")
        
        if relevant_pages:
            print("\nüîç –î–µ—Ç–∞–ª–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü:")
            for i, page_num in enumerate(relevant_pages, 1):
                print(f"  {i}. –°—Ç—Ä–∞–Ω–∏—Ü–∞ {page_num}")
        else:
            print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤—ã—à–µ –ø–æ—Ä–æ–≥–∞ —Å—Ö–æ–∂–µ—Å—Ç–∏")
            
        print("\n" + "=" * 50)
        print("‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞: {e}")
        raise


async def test_with_custom_params():
    """–¢–µ—Å—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏"""
    
    print("\nüîß –¢–µ—Å—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏")
    print("=" * 50)
    
    json_path = "tests/data/ocr_result.json"
    
    # –¢–µ –∂–µ utterances
    utterances = [
        "–ö–∞–∫–∏–µ —Ä–∏—Å–∫–∏ –∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –ø–æ–ª–∞ –æ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ (6‚Äì9 –º–º/–º), –ø—Ä–µ–≤—ã—à–∞—é—â–µ–º –Ω–æ—Ä–º–∞—Ç–∏–≤ 0,2%?",
        "–ö–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–æ—è–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –∑–≤—É—á–∞–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ—Å—Ç—É–∫–∏–≤–∞–Ω–∏–∏ –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–ª–∏—Ç–æ–∫ (–ø—É—Å—Ç–æ—Ç—ã/–æ—Ç—Å–ª–∞–∏–≤–∞–Ω–∏–µ) –∏ –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –¥–µ—Ñ–µ–∫—Ç–∞ –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã?",
        "–ö–∞–∫–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–º–æ–Ω—Ç–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —É—Å—Ç—É–ø–æ–≤ –º–µ–∂–¥—É —Å–º–µ–∂–Ω—ã–º–∏ –ø–ª–∏—Ç–æ—á–Ω—ã–º–∏ –ø–æ–∫—Ä—ã—Ç–∏—è–º–∏ 3‚Äì6 –º–º, –ø—Ä–µ–≤—ã—à–∞—é—â–∏—Ö –¥–æ–ø—É—Å—Ç–∏–º—ã–π 1 –º–º?",
        "–ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –∏ –¥–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –∏ –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ—Ç–ª–∏—á–∏–π –ø–æ —Ü–≤–µ—Ç—É, –ø–æ–ª–æ—Å, –ø—è—Ç–µ–Ω, –ø–æ–¥—Ç–µ–∫–∞ÃÅ—Ö, —Å–ª–µ–¥–æ–≤ –æ—Ç –∫–∏—Å—Ç–∏ –∏–ª–∏ –≤–∞–ª–∏–∫–∞, –º–µ–ª–µ–Ω–∏–∏ –∏ –æ—Ç—Å–ª–æ–µ–Ω–∏–∏ –ø–æ–∫—Ä–∞—Å–æ—á–Ω–æ–≥–æ —Å–ª–æ—è?",
        "–ö–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏ —Å–ø–æ—Å–æ–±—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –æ—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π —Å—Ç–µ–Ω –±–æ–ª–µ–µ 3 –º–º –Ω–∞ –º–µ—Ç—Ä (6 –º–º –Ω–∞ 2 –º), –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–¥–µ–ª–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—Ö?",
        "–ö–∞–∫–∏–µ –¥–µ—Ñ–µ–∫—Ç—ã –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–º–æ–Ω—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã –ø—Ä–∏ —Å–∫–æ–ª–∞—Ö –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–æ–π –ø–ª–∏—Ç–∫–∏ –∏ –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –æ–±–ª–∏—Ü–æ–≤–∞–Ω–Ω–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –±–æ–ª–µ–µ 1,5 –º–º –Ω–∞ –º–µ—Ç—Ä (3 –º–º –Ω–∞ 2 –º)?",
        "–ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∏–∑‚Äë–∑–∞ —É–≥–ª–æ–≤—ã—Ö –ø–µ—Ä–µ–≥–∏–±–æ–≤ –∏ —Ä–∞—Å—Ç—è–∂–µ–Ω–∏–π —É–ø–ª–æ—Ç–Ω—è—é—â–∏—Ö –ø—Ä–æ–∫–ª–∞–¥–æ–∫, –Ω–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏—Ö –ø–ª–æ—Ç–Ω—ã–π –æ–±–∂–∏–º?",
        "–ö–∞–∫–∏–µ —Ä–∏—Å–∫–∏ –∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ì–û–°–¢ 21519-2003 –ø–æ —á–∏—Å–ª—É –∫–æ–Ω—Ç—É—Ä–æ–≤ —É–ø–ª–æ—Ç–Ω—è—é—â–∏—Ö –ø—Ä–æ–∫–ª–∞–¥–æ–∫ –∏ –∏—Ö –ø—Ä–∏–ª–µ–≥–∞–Ω–∏—é –≤ –ø—Ä–∏—Ç–≤–æ—Ä–∞—Ö?",
        "–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ —á–∞—Å—Ç–∏—á–Ω—É—é –∑–∞–º–µ–Ω—É 8 –º —É–ø–ª–æ—Ç–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑–∏–Ω–æ–∫ –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ ¬´1¬ª, –∏–ª–∏ –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –¥–µ—Ñ–µ–∫—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–º–æ–Ω—Ç–∞–∂ –∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–∫–æ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤?",
        "–ö–∞–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ–±–ª–∏—Ü–æ–≤–∫–∏ –¥–æ 6 –º–º/–º –∏ –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–µ —à–≤—ã –ø–ª–∏—Ç–∫–∏ –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ ¬´–í¬ª —Å —É—á—ë—Ç–æ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –°–ü 71.13330.2017?",
        "–ö–∞–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –≤—ã—è–≤–ª—è—é—Ç—Å—è –∏ —É—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –æ—Ç—Å–ª–æ–µ–Ω–∏—è –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–æ–π –ø–ª–∏—Ç–∫–∏ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–≤—É—á–∞–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ—Å—Ç—É–∫–∏–≤–∞–Ω–∏–∏) –∏ –∫–∞–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –¢–† 94.06-99 –ø—Ä–∏–º–µ–Ω–∏–º—ã –ø—Ä–∏ —Ä–µ–º–æ–Ω—Ç–µ?",
        "–ö–∞–∫–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç –∏ –æ–±—ä—ë–º—ã (–≥—Ä—É–Ω—Ç–æ–≤–∫–∞, –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, —à–ø–∞–∫–ª—ë–≤–∫–∞, –ø–æ–∫—Ä–∞—Å–∫–∞, –∑–∞–º–µ–Ω–∞ –∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω–∏—Ç–∞ 17,80 –º¬≤) –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –¥–µ—Ñ–µ–∫—Ç–æ–≤ –∏ –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∏—Ö —Å–ª–µ–¥—É–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å?",
        "–ö–∞–∫–∏–µ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–∏—Å–∫–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –ø–æ–ª–∞ –æ—Ç –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –±–æ–ª–µ–µ 2 –º–º (–≤–ø–ª–æ—Ç—å –¥–æ 5 –º–º) –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ `1`?",
        "–ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –∏ –æ–±—ä—ë–º—ã —Ä–∞–±–æ—Ç —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –¥–µ—Ñ–µ–∫—Ç–æ–≤ –ø–æ–ª–∞, –∏ –∫—Ç–æ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥–µ—Ñ–µ–∫—Ç–æ–≤, –æ–±—Ä–∞–∑–æ–≤–∞–≤—à–∏—Ö—Å—è –≤ —Ö–æ–¥–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ-–º–æ–Ω—Ç–∞–∂–Ω—ã—Ö –∏ –æ—Ç–¥–µ–ª–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç?",
        "–ö–∞–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –Ω–æ—Ä–º (–°–ü 71.13330.2017 / –°–ù–∏–ü 3.04.01-87) –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —É—Å—Ç—É–ø–æ–≤ –º–µ–∂–¥—É —Å–º–µ–∂–Ω—ã–º–∏ –∏–∑–¥–µ–ª–∏—è–º–∏ –Ω–∞–ø–æ–ª—å–Ω—ã—Ö –ø–æ–∫—Ä—ã—Ç–∏–π –∏–∑ –¥–æ—â–∞—Ç—ã—Ö, –ø–∞—Ä–∫–µ—Ç–Ω—ã—Ö, –ª–∏–Ω–æ–ª–µ—É–º–Ω—ã—Ö –∏–ª–∏ –ü–í–•-–ø–ª–∏—Ç?",
        "–ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏ —Å–ø–æ—Å–æ–±—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –æ—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –¥–≤–µ—Ä–Ω–æ–π –∫–æ—Ä–æ–±–∫–∏ –º–µ–∂–∫–æ–º–Ω–∞—Ç–Ω—ã—Ö –¥–≤–µ—Ä–µ–π –±–æ–ª–µ–µ 1,5 –º–º/–º –∏ –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é?",
        "–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∑–∞–º–µ–Ω–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –≤–∏–¥–∏–º—ã—Ö –¥–µ—Ñ–µ–∫—Ç–∞—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –≤—Ö–æ–¥–Ω–æ–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–π –¥–≤–µ—Ä–∏ (—Ä–∞–∑–ª–∏—á–∏–µ —Ü–≤–µ—Ç–∞ –∏ –≥–ª—è–Ω—Ü–∞), –ø—Ä–∏–∑–Ω–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏ –Ω–µ—É—Å—Ç—Ä–∞–Ω–∏–º—ã–º–∏?",
        "–ö–∞–∫–∏–µ —Ä–µ–º–æ–Ω—Ç–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–∏ –ø—Ä–æ–≤–∏—Å–∞–Ω–∏–∏ –ø–æ–ª–æ—Ç–Ω–∞ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏ 4 –º–º/–º –∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –æ—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ 5 –º–º/–º, –∏ –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–≤—É—é –¥–≤–µ—Ä—å?",
        "–ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è –≥–µ—Ä–º–µ—Ç–∏—á–Ω–æ—Å—Ç–∏, —Ç–µ–ø–ª–æ- –∏ –∑–≤—É–∫–æ–∏–∑–æ–ª—è—Ü–∏–∏ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –∑–∞–∑–æ—Ä—ã –≤ —É–≥–ª–æ–≤—ã—Ö –∏ –¢-–æ–±—Ä–∞–∑–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö –æ–∫–æ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ —Ä–∞–∑–º–µ—Ä–æ–º 0,75‚Äì1,0 –º–º –∏ –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ì–û–°–¢?",
        "–ö–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥–µ—Ñ–µ–∫—Ç–∞, –æ–±—Ä–∞–∑–æ–≤–∞–≤—à–µ–≥–æ—Å—è –ø—Ä–∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–∏ –∏ –ø—Ä–∏–∑–Ω–∞–Ω–Ω–æ–≥–æ ¬´–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º, –Ω–µ—É—Å—Ç—Ä–∞–Ω–∏–º—ã–º¬ª (–∑–∞–∑–æ—Ä—ã >0,5 –º–º): –∑–∞–º–µ–Ω–∞ –∏–∑–¥–µ–ª–∏—è, —Ä–µ–∫–ª–∞–º–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è –∏–ª–∏ –¥—Ä—É–≥–∏–µ –º–µ—Ä—ã?",
        "–ö–∞–∫–∏–µ –ø—Ä–∏—á–∏–Ω—ã –∑–∞–µ–¥–∞–Ω–∏—è —Å—Ç–≤–æ—Ä–∫–∏ –∏ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∑–∞–ø–∏—Ä–∞—é—â–∏—Ö –ø—Ä–∏–±–æ—Ä–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∞–∂–µ, –∏ –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ä–∞–Ω–∏—è?",
        "–ö–∞–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –æ—Ç–ª–∏—á–∏—è–º –ø–æ —Ü–≤–µ—Ç—É –∏ –ø–æ—è–≤–ª–µ–Ω–∏—é –ø–æ–ª–æ—Å, —Å–ª–µ–¥–æ–≤ –æ—Ç –∫–∏—Å—Ç–∏ –∏–ª–∏ –≤–∞–ª–∏–∫–∞ –Ω–∞ –ø–æ–∫—Ä–∞—Å–æ—á–Ω–æ–º –ø–æ–∫—Ä—ã—Ç–∏–∏ –ø–æ—Ç–æ–ª–∫–∞?",
        "–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—è—Ç–µ–Ω, –ø–æ–¥—Ç–µ–∫–æ–≤, –±—Ä—ã–∑–≥ –∏ –º–µ–ª–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏, –∏ –∫–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –ø–æ—Ç–æ–ª–æ—á–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è?",
        "–ö–∞–∫–∏–µ —Ä–µ–º–æ–Ω—Ç–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (–≤–∫–ª—é—á–∞—è –≥—Ä—É–Ω—Ç–æ–≤–∫—É –≤ 2 —Å–ª–æ—è –∏ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ–∫—Ä–∞—Å–∫—É) –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –ø—Ä–∏ –æ—Ç—Å–ª–æ–µ–Ω–∏–∏ –ø–æ–∫—Ä—ã—Ç–∏—è, –Ω–µ—Ä–æ–≤–Ω–æ—Å—Ç—è—Ö, —Ç—Ä–µ—â–∏–Ω–∞—Ö –∏ —Ä–∞–∫–æ–≤–∏–Ω–∞—Ö –Ω–∞ –ø–æ—Ç–æ–ª–∫–µ?",
        "–ö–∞–∫–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –±—ã–ª–∏ –≤—ã—è–≤–ª–µ–Ω—ã –ø—Ä–∏ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ‚Äë–º–æ–Ω—Ç–∞–∂–Ω—ã—Ö –∏ –æ—Ç–¥–µ–ª–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç –≤ –∫–≤–∞—Ä—Ç–∏—Ä–µ?",
        "–ö–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –¥–µ—Ñ–µ–∫—Ç—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã —Ç—Ä–µ–±—É—é—Ç —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏ –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã —Ä–µ–º–æ–Ω—Ç–∞ –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç—Å—è –¥–ª—è –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è?",
        "–ö–∞–∫–æ–≤–∞ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –¥–µ—Ñ–µ–∫—Ç–æ–≤ –∏ –∫–∞–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è—é—Ç –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å —ç—Ç–æ–π –æ—Ü–µ–Ω–∫–∏?",
    ]
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Ä–æ–≥–∞–º–∏
    thresholds = [0.5]
    
    for threshold in thresholds:
        try:
            print(f"\nüéØ –¢–µ—Å—Ç–∏—Ä—É—é —Å –ø–æ—Ä–æ–≥–æ–º —Å—Ö–æ–∂–µ—Å—Ç–∏: {threshold}")
            
            relevant_pages = await analyze_document_from_json(
                json_path=json_path,
                utterances=utterances,
                score_threshold=threshold,
                top_limit=15
            )
            
            print(f"üìÑ –ü–æ—Ä–æ–≥ {threshold}: –Ω–∞–π–¥–µ–Ω–æ {len(relevant_pages)} —Å—Ç—Ä–∞–Ω–∏—Ü - {relevant_pages}")
            
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å –ø–æ—Ä–æ–≥–æ–º {threshold}: {e}")


if __name__ == "__main__":
    print("üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä–∞–Ω–∏—Ü")
    print("=" * 60)
    
    try:
        # –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç
        asyncio.run(test_semantic_page_filter())
        
        # –¢–µ—Å—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
        asyncio.run(test_with_custom_params())
        
    except KeyboardInterrupt:
        print("\n‚èπÔ∏è –¢–µ—Å—Ç –ø—Ä–µ—Ä–≤–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º")
    except Exception as e:
        print(f"\n‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
        sys.exit(1)