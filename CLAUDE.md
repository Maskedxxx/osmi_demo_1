# CLAUDE.md

Этот файл предоставляет руководство для Claude Code (claude.ai/code) при работе с кодом в этом репозитории.

## Правила общения

**ВАЖНО**: Всегда общайся с пользователем на русском языке - это его родной язык.

**ВАЖНО**: Никогда не добавляй и не реализовывай ничего, чего нет в коде, без прямой команды пользователя. Работай только после утверждения пользователя.

## Обзор проекта

Телеграм бот, построенный на aiogram 3.22.0. Бот находится в разработке и предоставляет базовый интерфейс для загрузки документов с поддержкой русского языка.

## Рекомендуемая простая архитектура

```
/
├── main.py              # Точка входа (как сейчас)
├── handlers/            # Обработчики команд
│   ├── __init__.py
│   ├── start.py         # /start команда
│   ├── documents.py     # Работа с документами
│   └── common.py        # Общие обработчики
├── keyboards/           # Клавиатуры
│   ├── __init__.py
│   └── main.py          # Основные клавиатуры
├── states.py            # Состояния пользователей
├── config.py            # Настройки и токен
└── utils.py             # Вспомогательные функции
```

### Принципы простой архитектуры:
- **Один файл = одна функция** (handlers/start.py только для /start)
- **Простые состояния** через aiogram FSM
- **Конфигурация в одном месте** (config.py)
- **Клавиатуры отдельно** от логики

### Текущая архитектура:
- **main.py**: Точка входа с реализацией бота через aiogram dispatcher pattern
- **Bot token**: API токен захардкожен (должен быть перенесен в переменные окружения)
- **Handlers**: Событийно-ориентированная архитектура с использованием aiogram декораторов
- **Keyboard**: Reply клавиатура с функционалом загрузки документов

## Команды разработки

### Запуск бота
```bash
python main.py
```

### Настройка окружения
```bash
python -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
pip install -r requirements.txt
```

## Ключевые компоненты

### Обработчики сообщений
- Обработчик команды `/start` для инициализации бота
- Обработчик текстовых сообщений для кнопки "Загрузить документ"
- Fallback обработчик для необработанных сообщений

### Структура бота
- Использует паттерн Dispatcher из aiogram
- Async/await архитектура для обработки сообщений
- Reply keyboard markup для взаимодействия с пользователем

## Примечание по безопасности
API токен сейчас захардкожен в main.py:7. Это должно быть перенесено в переменные окружения перед любым продакшн деплоем.